export const metadata = {
  title: 'QuestionnaireResponse',
  description: 'On this page, weâ€™ll dive into the different QuestionnaireResponse endpoints you can use to manage responses programmatically.',
}

# QuestionnaireResponse

QuestionnaireResponses are an essential part of Atticus. On this page, we'll dive into the different QuestionnaireResponse endpoints you can use to manage responses programmatically. We'll look at how to query, create, update, and delete responses. {{ className: 'lead' }}

---

## The QuestionnaireResponse model

The QuestionnaireResponse model contains all responded answers to a questionnaire.

### Properties

The QuestionnaireResponse model conforms to the FHIR QuestionnaireResponse resource. The following properties are available:

<Properties>
  <Property name="resourceType" type="'QuestionnaireResponse'" required>
      The FHIR resource type. This must be set to `'QuestionnaireResponse'`.
  </Property>
  <Property name="questionnaire" type="Canonical" required href='https://hl7.org/fhir/R5/questionnaireresponse-definitions.html#QuestionnaireResponse.questionnaire'>
      A FHIR [`Canonical`](https://hl7.org/fhir/R5/datatypes.html#canonical) url to the corresponding questionnaire (the form definition).
      For questionnaires (='templates') designed in Atticus Designer, this url will start with `http://templates.tiro.health/templates/`.
  </Property>
  <Property name='identifier' type='Identifier[]' href='https://hl7.org/fhir/R5/questionnaireresponse-definitions.html#QuestionnaireResponse.identifier'>
      An array of [`Identifier`](https://hl7.org/fhir/R5/datatypes.html#identifier) objects for this questionnaire response.
      More information about identifiers in Atticus can be found [here](./tips#linking-resources-to-your-internal-identifiers).
  </Property>
  <Property name="status" type="enum" required href='https://hl7.org/fhir/R5/questionnaireresponse-definitions.html#QuestionnaireResponse.status'>
        The status of the response. Possible values are:
        - `in-progress` (most common)
        - `completed`
  </Property>
  <Property name="subject" type="Reference" required href='https://hl7.org/fhir/R5/questionnaireresponse-definitions.html#QuestionnaireResponse.subject'>
      A FHIR [`Reference`](https://hl7.org/fhir/R5/references.html#Reference) object to the patient that is the subject of the response.
  </Property>
<Property name="encounter" type="Reference" href='https://hl7.org/fhir/R5/questionnaireresponse-definitions.html#QuestionnaireResponse.encounter'>
    A FHIR [`Reference`](https://hl7.org/fhir/R5/references.html#Reference) to the encounter to which this response is related.
</Property>
</Properties>

### Response Headers

When making GET, POST, or PUT requests to QuestionnaireResponse endpoints, the response includes a `Link` header with the URL to open the report form in the browser. The URL is specified with the relation `edit-form`. You can use this URL to redirect users to the web-based form editor.

Example response header for a QuestionnaireResponse with id `123`:
```http
Link: <https://app.tiro.health/filler/edit?response=QuestionnaireResponse/123>; rel="edit-form"
```

---

## Create a new QuestionnaireResponse {{ tag: 'POST', label: '/QuestionnaireResponse' }}

<Row>
  <Col>
    This endpoint allows you to create a new QuestionnaireResponse.
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="POST" label="/QuestionnaireResponse">
    ```bash {{ title: 'cURL' }}
    curl -X POST https://reports.tiro.heallth/fhir/r5/QuestionnaireResponse \
      -H "Authorization: Bearer {token}" \
      -d '{
        "resourceType": "QuestionnaireResponse",
        "questionnaire": "http://templates.tiro.health/templates/unreadable-unique-id|1",
        "status": "in-progress",
        "subject": {
          "reference": "Patient/123"
        }
      }'
    ```
    ```cs {{ title: 'C#' }}
    var client = new FhirClient(new Uri("https://reports-staging.tiro.health/fhir/r5"), settings, handler);
    var qr = new QuestionnaireResponse
    {
      Status = QuestionnaireResponse.QuestionnaireResponseStatus.InProgress,
      Questionnaire = new Canonical("http://templates.tiro.health/templates/unreadable-unique-id|1"),
      Subject = new ResourceReference("Patient/123")
    };
    client.Create(qr);
    ```
    </CodeGroup>
    ```json {{ title: 'Response' }}
    {
      "resourceType": "QuestionnaireResponse",
      "id": "1",
      "status": "in-progress",
      "questionnaire": "http://templates.tiro.health/templates/unreadable-unique-id|1.0.1",
      "subject": {
        "reference": "Patient/123"
      }
    }
    ```
  </Col>
</Row>

---


---

## Conditionally create a new QuestionnaireResponse {{ tag: 'POST', label: '/QuestionnaireResponse' }}

_to be documented_


---

## Get an existing QuestionnaireResponse {{ tag: 'GET', label: '/QuestionnaireResponse/:id' }}

<Row>
  <Col>
    This endpoint allows you to retrieve an existing QuestionnaireResponse by providing the QuestionnaireResponse id.
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="GET" label="/QuestionnaireResponse/1">
    ```bash {{ title: 'cURL' }}
    curl -G https://reports.tiro.health/fhir/r5/QuestionnaireResponse/1 \
      -H "Authorization: Bearer {token}" \
    ```
    ```cs {{ title: 'C#' }}
    var client = new FhirClient(new Uri("https://reports-staging.tiro.health/fhir/r5"), settings, handler);
    var questionnaireResponse = client.Read<QuestionnaireResponse>("1");
    ```
    </CodeGroup>
  </Col>
</Row>

---

## Delete an existing QuestionnaireResponse {{ tag: 'DELETE', label: '/QuestionnaireResponse/:id' }}

<Row>
  <Col>
    This endpoint allows you to delete an existing QuestionnaireResponse by providing the QuestionnaireResponse id. Once a QuestionnaireResponse is deleted, it cannot be recovered.
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="DELETE" label="/QuestionnaireResponse/1">
    ```bash {{ title: 'cURL' }}
    curl -X DELETE https://reports.tiro.health/fhir/r5/QuestionnaireResponse/1 \
      -H "Authorization: Bearer {token}" \
    ```
    ```cs {{ title: 'C#' }}
    var client = new FhirClient(new Uri("https://reports-staging.tiro.health/fhir/r5"), settings, handler);
    client.Delete("QuestionnaireResponse", "1");
    ```
    </CodeGroup>
    ```json {{ title: 'Response' }}
    {
      "resourceType": "OperationOutcome",
      "issue": [
        {
          "severity": "information",
          "code": "informational",
          "diagnostics": "Successfully deleted QuestionnaireResponse/1"
        }
      ]
    }
    ```
  </Col>
</Row>
